<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Manuel Neumann" />


<title>Observed Value Predictions for Multinomial Logit Models</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Observed Value Predictions for Multinomial Logit Models</h1>
<h4 class="author">Manuel Neumann</h4>



<p>This package provides functions that make it easy to get plottable predictions from multinomial logit models. The predictions are based on simulated draws of regression estimates from their respective sampling distribution.</p>
<p>At first I will present the theoretical and statistical background, before using sample data to demonstrate the functions of the package.</p>
<div id="the-multinomial-logit-model" class="section level2">
<h2>The multinomial logit model</h2>
<p>This is a short introduction in the theoretical and statistical background of the multinomial logit.</p>
<p>Dependent variables can not necessarily be ordered. In political science, for example, the variable of interest is often the individual’s vote choice, based on the set of parties that are presented. Of interest is then how somebody comes up with their choice.</p>
<p>More generally spoken, many questions deal with a nominal outcome variable and we want to test assumptions about the function that may lead to a respective outcome.</p>
<p>For these questions, the multinomial logit model is often a fitting option. Similar to an ordinary logit model, the multinomial logit model assumes that the probability to choose one over the other outcomes can be modeled with a linear function and a fitting logit link function. The difference of the multinomial logit is that it models the choice of <em>each</em> category as a function of the characteristics of the observation.</p>
<p>In formal terms, we assume <span class="math display">\[\Pr(y_i = j|X_i)\]</span> is a linear combination of <span class="math display">\[X_i\beta_j\]</span>, whereby <span class="math display">\[\beta_j\]</span> is a choice specific vector. This means we are interested in the probability that the observed choice of the individual <span class="math display">\[y_i\]</span> is the choice category <span class="math display">\[j\]</span> dependent on characteristics of the observation’s characteristics <span class="math display">\[X_i\]</span>. Therefore we estimate a choice specific vector <span class="math inline">\(\beta_j\)</span>. Since the probability is restricted to be between <span class="math display">\[0\]</span> and <span class="math display">\[1\]</span>, we use <span class="math display">\[exp(X_i\beta_j)\]</span> as a fitting link function. Additionally, we bring the exponents into relationship with each other and normalize them by dividing through the sum of them.</p>
<p>Since we cannot compare all choices against each other, the model is not identified so far. Instead, we have to choose a baseline category and fix it to <span class="math display">\[0\]</span>. Therefore we estimate the probability of all choices to be chosen in comparison to the baseline choice.</p>
<p>Eventually, we end up with the following probability function:</p>
<p><span class="math display">\[\Pr(y_i|X_i)= \frac{exp(X_i\beta_j)}{\sum^{J}_{m=1}exp(X_i \beta_m)}\]</span>, whereby <span class="math display">\[\beta_1 = 0\]</span> This is the link function that is used for estimation.</p>
<p>For a more detailed insight into the multinomial model refer to sources like <a href="https://data.princeton.edu/wws509/notes/c6s2">these lecture notes by Germán Rodríguez</a>.</p>
</div>
<div id="using-the-package" class="section level2">
<h2>Using the package</h2>
<div id="how-does-the-function-work" class="section level3">
<h3>How does the function work?</h3>
<p>As we have seen above, the multinomial logit can be used to get an insight into the probabilities to choose one option out of a set of alternatives. We have also seen that we need a baseline category to identify the model. This is mathematically necessary, but does not come in handy for purposes of interpretation.</p>
<p>It is far more helpful and easier to understand to come up with predicted probabilities and first differences for values of interest <span class="citation">(see e.g., King, Tomz, and Wittenberg 2000 for approaches in social sciences)</span>. Based on simulations, this package helps to easily predict probabilities and confidence intervals for each choice category over a specified scenario (so far: the observed values).</p>
<p>The procedure follows the following steps:</p>
<ol style="list-style-type: decimal">
<li>Estimate a multinomial model and save the coefficients and the variance covariance matrix (based on the Hessian-matrix of the model).</li>
<li>To simulate uncertainty, make <span class="math inline">\(n\)</span> draws of coefficients from a simulated sampling distribution based on the coefficients and the variance covariance matrix.</li>
<li>Predict probabilities by multiplying the drawn coefficients with a specified scenario (so far these are the observed values).</li>
<li>Take the mean and the quantiles of the simulated predicted probabilities.</li>
</ol>
<p>The presented functions follow these steps. Additionally, they use the so called observed value approach. This means that the “scenario” uses all observed values that informed the model. Therefore the function takes these more detailed steps:</p>
<ol style="list-style-type: decimal">
<li>For all (complete) cases <span class="math inline">\(n\)</span> predictions are computed based on their observed independent values and the <span class="math inline">\(n\)</span> sets of coefficients.</li>
<li>Next the predicted values of all observations for each simulation are averaged.</li>
<li>Take the mean and the quantiles of the simulated predicted probabilities (same as above).</li>
</ol>
<p>For first differences, the simulated predictions are subtracted from each other.</p>
<p>To showcase these steps, I present a reproducible example of how the functions can be used.</p>
</div>
<div id="example" class="section level3">
<h3>Example</h3>
<p>The example is based on <a href="https://stats.idre.ucla.edu/r/dae/multinomial-logistic-regression/">this UCLA R data analysis example</a>.</p>
<p>The data is an example dataset, including the career choice of 200 high school students and their respective performance indicators. We want to predict the probability of the students to choose either an academic, general, or vocational program.</p>
<p>For this task, we need the following packages:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Reading data</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(foreign)</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Required packages</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(magrittr) <span class="co"># for pipes</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">library</span>(nnet) <span class="co"># for the multinom()-function</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">library</span>(MASS) <span class="co"># for the multivariate normal distribution</span></a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co"># The package</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co"># devtools::install_github(&quot;ManuelNeumann/MNLpred&quot;)</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw">library</span>(MNLpred)</a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co"># Plotting the predicted probabilities:</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">library</span>(scales)</a></code></pre></div>
<p>Now we load the data:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># The data:</span></a>
<a class="sourceLine" id="cb2-2" title="2">ml &lt;-<span class="st"> </span><span class="kw">read.dta</span>(<span class="st">&quot;https://stats.idre.ucla.edu/stat/data/hsbdemo.dta&quot;</span>)</a></code></pre></div>
<p>As we have seen above, we need a baseline or reference category for the model to work. With the function <code>relevel()</code> we set the category <code>&quot;academic&quot;</code> as the baseline. Additionally, we compute a numeric dummy for the gender variable to include it in the model.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Data preparation:</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># Set &quot;academic&quot; as the reference category for the multinomial model</span></a>
<a class="sourceLine" id="cb3-4" title="4">ml<span class="op">$</span>prog2 &lt;-<span class="st"> </span><span class="kw">relevel</span>(ml<span class="op">$</span>prog, <span class="dt">ref =</span> <span class="st">&quot;academic&quot;</span>)</a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co"># Computing a numeric dummy for &quot;female&quot; (= 1)</span></a>
<a class="sourceLine" id="cb3-7" title="7">ml<span class="op">$</span>female2 &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(ml<span class="op">$</span>female <span class="op">==</span><span class="st"> &quot;female&quot;</span>)</a></code></pre></div>
<p>The next step is to compute the actual model. The function of the <code>MNLpred</code> package is based on models that were estimated with the <code>multinom()</code>-function of the <code>nnet</code> package. The <code>multinom()</code> function is convenient because it does not need transformed datasets. The syntax is very easy and resembles the ordinary regression functions. Important is that the Hessian matrix is returned with <code>Hess = TRUE</code>. The matrix is needed to simulate the sampling distribution.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Multinomial logit model:</span></a>
<a class="sourceLine" id="cb4-2" title="2">mod1 &lt;-<span class="st"> </span><span class="kw">multinom</span>(prog2 <span class="op">~</span><span class="st"> </span>female2 <span class="op">+</span><span class="st"> </span>read <span class="op">+</span><span class="st"> </span>write <span class="op">+</span><span class="st"> </span>math <span class="op">+</span><span class="st"> </span>science,</a>
<a class="sourceLine" id="cb4-3" title="3">                 <span class="dt">Hess =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb4-4" title="4">                 <span class="dt">data =</span> ml)</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; # weights:  21 (12 variable)</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; initial  value 219.722458 </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; iter  10 value 189.686272</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; final  value 168.079235 </span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; converged</span></a></code></pre></div>
<p>The results show the coefficients and standard errors. As we can see, there are two sets of coefficients. They describe the relationship between the reference category and the choices <code>general</code> and <code>vocation</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">summary</span>(mod1)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; multinom(formula = prog2 ~ female2 + read + write + math + science, </span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;     data = ml, Hess = TRUE)</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt;          (Intercept)   female2        read       write        math    science</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; general     4.314585 0.2180419 -0.05466370 -0.03863058 -0.09931014 0.09386869</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; vocation    8.592285 0.3618313 -0.05535549 -0.07165604 -0.12226602 0.06388337</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt; Std. Errors:</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt;          (Intercept)   female2       read      write       math    science</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; general     1.444954 0.4368366 0.02816753 0.03088249 0.03307516 0.03007196</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; vocation    1.553752 0.4595495 0.03060286 0.03142334 0.03598240 0.03020753</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; Residual Deviance: 336.1585 </span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; AIC: 360.1585</span></a></code></pre></div>
<p>A first rough review of the coefficients shows that higher math scores lead to a lower probability of the students to choose a general or vocational track. It is hard to evaluate whether the effect is statistically significant and how the probabilities for each choice look like. For this it is helpful to predict the probabilities for certain scenarios and plot the means and confidence intervals for visual analysis.</p>
<p>Let’s say we are interested in the relationship between the math scores and the probability to choose one or the other type of track. It would be helpful to plot the predicted probabilities for the span of the math scores.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">summary</span>(ml<span class="op">$</span>math)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#&gt;   33.00   45.00   52.00   52.65   59.00   75.00</span></a></code></pre></div>
<p>As we can see, the math scores range from 33 to 75. Let’s pick this score as the x-variable (<code>xvari</code>) and use the <code>mnl_pred_ova()</code> function to get predicted probabilities for each math score in this range.</p>
<p>The function needs a multinomial logit model (<code>model</code>), data (<code>data</code>), the variable of interest <code>xvari</code>, the steps for which the probabilities should be predicted (<code>by</code>). Additionally, a <code>seed</code> can be defined for replication purposes, the numbers of simulations can be defined (<code>nsim</code>), and the confidence intervals (<code>probs</code>).</p>
<p>If we want to hold another variable stable, we can specify so with <code>scennname</code>and <code>scenvalue</code>. See also the <code>mnl_fd_ova()</code> function below.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">pred1 &lt;-<span class="st"> </span><span class="kw">mnl_pred_ova</span>(<span class="dt">model =</span> mod1,</a>
<a class="sourceLine" id="cb7-2" title="2">                      <span class="dt">data =</span> ml,</a>
<a class="sourceLine" id="cb7-3" title="3">                      <span class="dt">xvari =</span> <span class="st">&quot;math&quot;</span>,</a>
<a class="sourceLine" id="cb7-4" title="4">                      <span class="dt">by =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb7-5" title="5">                      <span class="dt">seed =</span> <span class="st">&quot;random&quot;</span>, <span class="co"># default</span></a>
<a class="sourceLine" id="cb7-6" title="6">                      <span class="dt">nsim =</span> <span class="dv">100</span>, <span class="co"># faster than the default 1000</span></a>
<a class="sourceLine" id="cb7-7" title="7">                      <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>)) <span class="co"># default</span></a></code></pre></div>
<p>The function returns a list with several elements. Most importantly, it returns a <code>plotdata</code> data set:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">pred1<span class="op">$</span>plotdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&gt;   math    prog2      mean      lower     upper</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#&gt; 1   33 academic 0.1415498 0.04586067 0.2914933</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; 2   34 academic 0.1536917 0.05373347 0.3042798</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt; 3   35 academic 0.1667325 0.06282696 0.3173124</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt; 4   36 academic 0.1807040 0.07400513 0.3305754</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt; 5   37 academic 0.1956318 0.08718139 0.3440521</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; 6   38 academic 0.2115341 0.10230535 0.3577249</span></a></code></pre></div>
<p>As we can see, it includes the range of the x variable, a mean, a lower, and an upper bound of the confidence interval. Concerning the choice category, the data is in a long format. This makes it easy to plot it with the <code>ggplot</code> syntax. The choice category can now easily be used to differentiate the lines in the plot by using <code>linetype = prog2</code> in the <code>aes()</code>. Another option is to use <code>facet_wrap()</code> or <code>facet_grid()</code> to differentiate the predictions:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> pred1<span class="op">$</span>plotdata, <span class="kw">aes</span>(<span class="dt">x =</span> math, <span class="dt">y =</span> mean,</a>
<a class="sourceLine" id="cb9-2" title="2">                                  <span class="dt">ymin =</span> lower, <span class="dt">ymax =</span> upper)) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw">geom_ribbon</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span><span class="st"> </span><span class="co"># Confidence intervals</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Mean</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">  </span><span class="kw">facet_grid</span>(prog2 <span class="op">~</span>., <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> <span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="co"># % labels</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Predicted probabilities&quot;</span>,</a>
<a class="sourceLine" id="cb9-9" title="9">       <span class="dt">x =</span> <span class="st">&quot;Math score&quot;</span>) <span class="co"># Always label your axes ;)</span></a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --> If we want first differences between two scenarios, we can use the function <code>mnl_fd2_ova()</code>. The function takes similar arguments as the function above, but now the values for the scenarios of interest have to be supplied. Imagine we want to know what difference it makes to have the lowest or highest <code>math</code> score. This can be done as follows:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">fdif1 &lt;-<span class="st"> </span><span class="kw">mnl_fd2_ova</span>(<span class="dt">model =</span> mod1,</a>
<a class="sourceLine" id="cb10-2" title="2">                     <span class="dt">data =</span> ml,</a>
<a class="sourceLine" id="cb10-3" title="3">                     <span class="dt">xvari =</span> <span class="st">&quot;math&quot;</span>,</a>
<a class="sourceLine" id="cb10-4" title="4">                     <span class="dt">value1 =</span> <span class="kw">min</span>(ml<span class="op">$</span>math),</a>
<a class="sourceLine" id="cb10-5" title="5">                     <span class="dt">value2 =</span> <span class="kw">max</span>(ml<span class="op">$</span>math),</a>
<a class="sourceLine" id="cb10-6" title="6">                     <span class="dt">nsim =</span> <span class="dv">100</span>)</a></code></pre></div>
<p>The first differences can then be depicted in a graph.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">ggplot</span>(fdif1<span class="op">$</span>plotdata_fd, <span class="kw">aes</span>(categories, <span class="dt">y =</span> mean,</a>
<a class="sourceLine" id="cb11-2" title="2">                              <span class="dt">ymin =</span> lower, <span class="dt">max =</span> upper)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="st">  </span><span class="kw">geom_pointrange</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> <span class="kw">percent_format</span>(),</a>
<a class="sourceLine" id="cb11-6" title="6">                     <span class="dt">name =</span> <span class="st">&quot;First difference&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We are often not only interested in the static difference, but the difference across a span of values, given a difference in a second variable. This is especially helpful when we look at dummy variables. For example, we could be interested in the effect of <code>female</code>. With the <code>mnl_fd_ova()</code> function, we can predict the probabilities for two scenarios and subtract them. The function returns the differences and the confidence intervals of the differences. The different scenarios can be held stable with <code>scenname</code> and the <code>scenvalues</code>. <code>scenvalues</code> takes a vector of two numeric values. These values are held stable for the variable that is named in <code>scenname</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">fdif1 &lt;-<span class="st"> </span><span class="kw">mnl_fd_ova</span>(<span class="dt">model =</span> mod1,</a>
<a class="sourceLine" id="cb12-2" title="2">                    <span class="dt">data =</span> ml,</a>
<a class="sourceLine" id="cb12-3" title="3">                    <span class="dt">xvari =</span> <span class="st">&quot;math&quot;</span>,</a>
<a class="sourceLine" id="cb12-4" title="4">                    <span class="dt">by =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb12-5" title="5">                    <span class="dt">scenname =</span> <span class="st">&quot;female2&quot;</span>,</a>
<a class="sourceLine" id="cb12-6" title="6">                    <span class="dt">scenvalues =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb12-7" title="7">                    <span class="dt">nsim =</span> <span class="dv">100</span>)</a></code></pre></div>
<p>As before, the function returns a list, including a data set that can be used to plot the differences.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">fdif1<span class="op">$</span>plotdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="co">#&gt;   math    prog2 female2      mean      lower     upper</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt; 1   33 academic       0 0.1735619 0.04519270 0.4007422</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co">#&gt; 2   34 academic       0 0.1868426 0.05320323 0.4114269</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#&gt; 3   35 academic       0 0.2009845 0.06249233 0.4221498</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt; 4   36 academic       0 0.2160071 0.07321723 0.4329001</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt; 5   37 academic       0 0.2319238 0.08481679 0.4439008</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt; 6   38 academic       0 0.2487403 0.09781500 0.4542154</span></a></code></pre></div>
<p>Since the function calls the <code>mnl_pred_ova()</code> function internally, it also returns the output of the two predictions in the list element <code>Prediction1</code> and <code>Prediction2</code>. These elements also include the plot data for both scenarios. Binding them together makes for good data to visualize the differences.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">pred_plotdat &lt;-<span class="st"> </span><span class="kw">rbind</span>(fdif1<span class="op">$</span>Prediction1<span class="op">$</span>plotdata,</a>
<a class="sourceLine" id="cb14-2" title="2">                      fdif1<span class="op">$</span>Prediction2<span class="op">$</span>plotdata)</a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="kw">ggplot</span>(<span class="dt">data =</span> pred_plotdat, <span class="kw">aes</span>(<span class="dt">x =</span> math, <span class="dt">y =</span> mean,</a>
<a class="sourceLine" id="cb14-5" title="5">                                <span class="dt">ymin =</span> lower, <span class="dt">ymax =</span> upper,</a>
<a class="sourceLine" id="cb14-6" title="6">                                <span class="dt">linetype =</span> <span class="kw">as.factor</span>(female2))) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="st">  </span><span class="kw">geom_ribbon</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="st">  </span><span class="kw">facet_grid</span>(prog2 <span class="op">~</span>., <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> <span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="co"># % labels</span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="st">  </span><span class="kw">scale_linetype_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Female&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Predicted probabilities&quot;</span>,</a>
<a class="sourceLine" id="cb14-14" title="14">       <span class="dt">x =</span> <span class="st">&quot;Math score&quot;</span>) <span class="co"># Always label your axes ;)</span></a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>As we can see, the differences between <code>female</code> and not-<code>female</code> are minimal. So let’s take a look at the differences:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> fdif1<span class="op">$</span>plotdata_fd, <span class="kw">aes</span>(<span class="dt">x =</span> math, <span class="dt">y =</span> mean,</a>
<a class="sourceLine" id="cb15-2" title="2">                                  <span class="dt">ymin =</span> lower, <span class="dt">ymax =</span> upper)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="st">  </span><span class="kw">geom_ribbon</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="st">  </span><span class="kw">facet_grid</span>(prog2 <span class="op">~</span>., <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> <span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="co"># % labels</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Predicted probabilities&quot;</span>,</a>
<a class="sourceLine" id="cb15-10" title="10">       <span class="dt">x =</span> <span class="st">&quot;Math score&quot;</span>) <span class="co"># Always label your axes ;)</span></a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We can see that the differences are in fact minimal and at no point statistically significant from 0.</p>
</div>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Multinomial logit models are important to model nominal choices. They are restricted however by being in need of a baseline category. Additionally, the log-character of the estimates makes it difficult to interpret them in meaningful ways. Predicting probabilities for all choices for scenarios, based on the observed data provides much more insight. The functions of this package provide easy to use functions that return data that can be used to plot predicted probabilities. The function uses a model from the <code>multinom()</code> function and uses the observed value approach and a supplied scenario to predict values over the range of fitting values. The functions simulate sampling distributions and therefore provide meaningful confidence intervals. <code>mnl_pred_ova()</code> can be used to predict probabilities for a certain scenario. <code>mnl_fd_ova()</code> can be used to predict probabilities for two scenarios and their first differences.</p>
</div>
<div id="acknowledgment" class="section level2">
<h2>Acknowledgment</h2>
<p>My code is inspired by the method courses in the <a href="https://www.sowi.uni-mannheim.de/en/academics/prospective-students/ma-in-political-science/">Political Science master’s program at the University of Mannheim</a>(cool place, check it out!). The skeleton of the code is based on a tutorial taught by <a href="https://www.marcel-neunhoeffer.com/">Marcel Neunhoeffer</a> and <a href="https://sebastiansternberg.github.io/">Sebastian Sternberg</a> (lecture: “Advanced Quantitative Methods” by <a href="http://methods.sowi.uni-mannheim.de/thomas_gschwend/">Thomas Gschwend</a>).</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2>References</h2>
<div id="refs" class="references">
<div id="ref-king2000">
<p>King, Gary, Michael Tomz, and Jason Wittenberg. 2000. “Making the Most of Statistical Analyses: Improving Interpretation and Presentation.” <em>American Journal of Political Science</em> 44 (2): 341–55.</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
